<template>
  <div style="margin-bottom:10px;border-bottom:1px solid gainsboro;">
    <Row type="flex" justify="center">
      <Col span="18" style="display:flex;justify-content: space-between;">
        <router-link
          to="/"
          class="layout-logo"
          style="display: flex;justify-content: center;align-items: center;margin-bottom: -4px;"
        >
          <span style="font-size:30px;">
            <svg
              data-v-22db9086
              version="1.0"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              width="100"
              height="50"
              viewBox="0 0 200 50"
              preserveAspectRatio="xMidYMid meet"
              color-interpolation-filters="sRGB"
              class="el-tooltip"
              style="margin: auto;"
            >
              <g
                data-v-22db9086
                fill="#939393"
                class="icon-text-wrapper icon-svg-group iconsvg"
              >
                <g class="iconsvg-imagesvg" transform="translate(0,3.9617977142333984)">
                  <rect
                    fill="#939393"
                    fill-opacity="0"
                    stroke-width="2"
                    x="0"
                    y="0"
                    width="60"
                    height="56.86889855268"
                    class="image-rect"
                  />
                  <svg
                    x="0"
                    y="0"
                    width="60"
                    height="56.86889855268"
                    filtersec="colorsb7128136565"
                    class="image-svg-svg"
                  >
                    <svg
                      version="1.1"
                      id="图层_1"
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                      x="0px"
                      y="0px"
                      viewBox="0.06000000238418579 0.5799999833106995 124.93999481201172 118.41999816894531"
                      enable-background="new 0 0 125 120"
                      xml:space="preserve"
                    >
                      <path
                        fill="#1175C9"
                        d="M62.53,0.58c-32.7,0-59.21,26.51-59.21,59.21c0,3.26,0.28,6.45,0.78,9.56l37.38-37.38l34.41,36.4
	l16.73-16.46l26.21,26.21c1.88-5.78,2.91-11.94,2.91-18.34C121.74,27.1,95.23,0.58,62.53,0.58z"
                      />
                      <path
                        fill="gray"
                        d="M10.57,86.72c5.4,10.56,13.87,19.28,24.24,24.99V58.89L0.06,93.03L10.57,86.72z M49.67,58.89v36.04
	l17.17-16.89L49.67,58.89z M49.67,117.41c4.38,1.03,8.93,1.59,13.62,1.59c8.58,0,16.73-1.84,24.09-5.12V72.43l-37.71,36.92V117.41z
	 M99.13,76.65v31.84c4.72-3.55,8.83-7.87,12.17-12.75l13.7,6.53L99.13,76.65z"
                      />
                    </svg>
                  </svg>
                  <!---->
                </g>
                <g transform="translate(67,0)">
                  <g class="tp-name iconsvg-namesvg" transform="translate(1.9699974060058594,0)">
                    <g>
                      <path fill="gray"
                        d="M13.26-2.20L13.26-36.30L50.05-36.30L50.05-42.52L6.49-42.52L6.49 4.57L50.27 4.57L50.27-2.20ZM40.54-3.69L40.54-16.66L50.16-16.66L50.16-22.99L24.97-22.99L24.97-26.18C31.52-26.62 39.44-28.00 45.54-29.43L43.95-35.53C35.80-33.60 27.83-32.51 18.21-32.01L18.21-21.73C18.21-12.65 17.93-11.44 13.75-6.38L19.30-2.37C23.59-7.42 24.64-10.12 24.91-16.66L33.72-16.66L33.72-3.69ZM74.85-28.21L71.17-28.21L71.17-22.44L104.17-22.44L104.17-28.21L91.57-28.21L91.57-32.06L102.41-32.06L102.41-37.90L91.57-37.90L91.57-43.45L85.25-43.67L85.25-37.90L80.80-37.90C81.23-39.16 81.62-40.26 81.89-41.36L76.12-43.01C74.97-38.99 72.98-34.32 70.62-30.64ZM71.11-33.44C68.91-36.19 65.23-40.70 63.30-42.90L58.19-38.39C60.11-36.02 64.19-30.91 65.78-28.71ZM85.25-32.06L85.25-28.21L76.61-28.21L78.54-32.06ZM86.63-1.65C78.65-2.09 74.41-1.76 69.30-5.67L69.30-26.73L58.08-26.73L58.08-20.18L62.92-20.18L62.92-7.04C61.16-4.90 58.63-2.37 56.04 0.22L60.45 5.17C63.03 2.58 64.41 0.99 65.94-0.99C72.60 5.06 77.11 3.79 87.67 4.84C91.03 5.12 99.66 5.00 104.17 4.57L105.66-2.15C99.94-1.49 93.00-1.26 86.63-1.65ZM101.20-3.96L101.20-20.24L73.75-20.24L73.75-3.96ZM80.19-14.46L94.71-14.46L94.71-9.85L80.19-9.85Z"
                        transform="translate(-6.49, 43.67)"
                      />
                    </g>
                    <!---->
                    <!---->
                    <!---->
                    <!---->
                    <!---->
                    <!---->
                    <!---->
                  </g>
                  <g
                    class="tp-slogan iconsvg-slogansvg"
                    fill="#1175c9"
                    transform="translate(0,55.839996337890625)"
                  >
                    <!---->
                    <rect x="0" height="1" y="3.9750003814697266" width="0" />
                    <rect height="1" y="3.9750003814697266" width="0" x="99.17000579833984" />
                    <g transform="translate(3,0)">
                      <path
                        d="M8.06-6.05L8.06-6.05L6.94-6.05Q6.52-7.78 4.55-7.83L4.55-7.83Q1.83-7.69 1.73-4.36L1.73-4.36Q1.73-0.80 4.59-0.80L4.59-0.80Q6.56-0.84 7.03-3.19L7.03-3.19L8.16-3.19Q7.64 0.05 4.36 0.14L4.36 0.14Q0.61 0 0.52-4.31L0.52-4.31Q0.70-8.63 4.55-8.81L4.55-8.81Q7.59-8.72 8.06-6.05ZM14.02 0L13.18-2.48L9.71-2.48L8.82 0L7.65 0L10.88-8.58L12.19-8.58L15.29 0L14.02 0ZM11.44-7.31L10.08-3.52L12.76-3.52L11.49-7.31L11.44-7.31ZM19.28-3.70L16.46-3.70L16.46 0L15.29 0L15.29-8.58L19.28-8.58Q22.14-8.58 22.14-6.28L22.14-6.28Q22.14-4.88 20.92-4.22L20.92-4.22Q21.95-3.94 21.95-2.58L21.95-2.58L22.04-1.03Q22.00-0.38 22.46-0.19L22.46-0.19L22.46 0L21.01 0Q20.87-0.61 20.82-2.16L20.82-2.16Q20.87-3.70 19.28-3.70L19.28-3.70ZM19.37-7.64L16.46-7.64L16.46-4.69L19.18-4.69Q20.92-4.69 20.92-6.19L20.92-6.19Q20.92-7.64 19.37-7.64L19.37-7.64ZM26.27-7.64L23.92-7.64L23.92-4.64L26.22-4.64Q28.00-4.64 28.00-6.19L28.00-6.19Q28.00-7.59 26.27-7.64L26.27-7.64ZM26.64-3.61L23.92-3.61L23.92 0L22.75 0L22.75-8.58L26.64-8.58Q29.08-8.48 29.17-6.19L29.17-6.19Q29.03-3.70 26.64-3.61L26.64-3.61ZM30.73-1.03L35.88-1.03L35.88 0L29.55 0L29.55-8.58L35.79-8.58L35.79-7.59L30.73-7.59L30.73-4.92L35.41-4.92L35.41-3.89L30.73-3.89L30.73-1.03ZM37.62-8.58L41.93-1.64L41.93-8.58L43.06-8.58L43.06 0L41.75 0L37.39-6.94L37.34-6.94L37.34 0L36.22 0L36.22-8.58L37.62-8.58ZM45.88-7.59L42.97-7.59L42.97-8.58L49.91-8.58L49.91-7.59L47.00-7.59L47.00 0L45.88 0L45.88-7.59ZM51.09-1.03L56.24-1.03L56.24 0L49.91 0L49.91-8.58L56.15-8.58L56.15-7.59L51.09-7.59L51.09-4.92L55.77-4.92L55.77-3.89L51.09-3.89L51.09-1.03ZM60.70-3.70L57.89-3.70L57.89 0L56.72 0L56.72-8.58L60.70-8.58Q63.56-8.58 63.56-6.28L63.56-6.28Q63.56-4.88 62.34-4.22L62.34-4.22Q63.37-3.94 63.37-2.58L63.37-2.58L63.47-1.03Q63.42-0.38 63.89-0.19L63.89-0.19L63.89 0L62.44 0Q62.29-0.61 62.25-2.16L62.25-2.16Q62.29-3.70 60.70-3.70L60.70-3.70ZM60.79-7.64L57.89-7.64L57.89-4.69L60.61-4.69Q62.34-4.69 62.34-6.19L62.34-6.19Q62.34-7.64 60.79-7.64L60.79-7.64ZM64.74-5.53L63.85-5.53L63.85-8.58L64.74-8.58L64.74-5.53ZM71.40-6.09L71.40-6.09L70.32-6.09Q70.23-7.73 68.17-7.83L68.17-7.83Q66.24-7.78 66.24-6.33L66.24-6.33Q66.24-5.39 67.27-5.25L67.27-5.25L69.71-4.69Q71.63-4.22 71.63-2.34L71.63-2.34Q71.59 0.05 68.26 0.14L68.26 0.14Q66.43 0.14 65.68-0.61L65.68-0.61Q64.74-1.31 64.79-2.77L64.79-2.77L65.92-2.77Q65.96-0.80 68.26-0.75L68.26-0.75Q70.51-0.80 70.56-2.20L70.56-2.20Q70.74-3.38 68.68-3.75L68.68-3.75L66.90-4.13Q65.07-4.64 65.07-6.19L65.07-6.19Q65.21-8.72 68.07-8.81L68.07-8.81Q71.31-8.81 71.40-6.09ZM81.25-6.05L81.25-6.05L80.13-6.05Q79.71-7.78 77.74-7.83L77.74-7.83Q75.02-7.69 74.93-4.36L74.93-4.36Q74.93-0.80 77.79-0.80L77.79-0.80Q79.75-0.84 80.22-3.19L80.22-3.19L81.35-3.19Q80.83 0.05 77.55 0.14L77.55 0.14Q73.80 0 73.71-4.31L73.71-4.31Q73.90-8.63 77.74-8.81L77.74-8.81Q80.79-8.72 81.25-6.05ZM88.34-4.27L88.34-4.27Q88.15-7.64 85.34-7.83L85.34-7.83Q82.48-7.69 82.34-4.27L82.34-4.27Q82.48-0.94 85.34-0.80L85.34-0.80Q88.15-0.98 88.34-4.27ZM89.51-4.27L89.51-4.27Q89.23 0 85.34 0.14L85.34 0.14Q81.40 0 81.12-4.27L81.12-4.27Q81.35-8.72 85.34-8.81L85.34-8.81Q89.23-8.67 89.51-4.27ZM93.83-3.70L91.02-3.70L91.02 0L89.84 0L89.84-8.58L93.83-8.58Q96.69-8.58 96.69-6.28L96.69-6.28Q96.69-4.88 95.47-4.22L95.47-4.22Q96.50-3.94 96.50-2.58L96.50-2.58L96.59-1.03Q96.55-0.38 97.02-0.19L97.02-0.19L97.02 0L95.56 0Q95.42-0.61 95.38-2.16L95.38-2.16Q95.42-3.70 93.83-3.70L93.83-3.70ZM93.92-7.64L91.02-7.64L91.02-4.69L93.73-4.69Q95.47-4.69 95.47-6.19L95.47-6.19Q95.47-7.64 93.92-7.64L93.92-7.64ZM98.47-1.03L103.63-1.03L103.63 0L97.30 0L97.30-8.58L103.54-8.58L103.54-7.59L98.47-7.59L98.47-4.92L103.16-4.92L103.16-3.89L98.47-3.89L98.47-1.03Z"
                        transform="translate(-0.515625, 8.8125)"
                      />
                    </g>
                  </g>
                </g>
              </g>
            </svg>
          </span>
          <span
            style="font-size:10px;margin-top: 18px;color:#adadad;"
          >Full Stack Web Developer</span>
        </router-link>

        <Menu
          mode="horizontal"
          theme="light"
          active-name="1"
          @on-select="name=>{name=='logout' && logout()}"
        >
          <div class="layout-nav">
            <MenuItem
              v-for="ele in types"
              :key="ele.id"
              :to="`/blogs/${ele.id}`"
              :name="ele.id"
              style="display:flex;align-items: center;"
            >
              <i v-html="ele.svg" class="ivu-icon"></i>
              <span>{{ele.name}}</span>
            </MenuItem>
            <!-- <MenuItem name="3">
              <Icon size="20" type="ios-analytics"></Icon>
              <router-link to="/about">关于本人</router-link>
            </MenuItem>-->
            <template v-if="user.username">
              <Submenu name="4">
                <template slot="title">
                  <Icon
                    size="20"
                    :type="{github:'logo-github',local:'ios-contact'}[user.oauthName]"
                  ></Icon>
                  {{user.username}}
                </template>
                <MenuItem name="logout" :on-select="e=>alert(9090)">退出</MenuItem>
              </Submenu>
              <MenuItem v-if="user.username" name="8" style="display:flex;align-items: center;">
                <Icon size="20" type="ios-settings" />
                <a href="/public/admin/index.html" style="color:#515a6e;">管理博客</a>
              </MenuItem>
            </template>
            <template v-else>
              <MenuItem name="5" style="display:flex;align-items: center;">
                <Icon size="20" type="logo-github"></Icon>
                <a href="/api/github/login" style="color:#515a6e;">用github登陆</a>
              </MenuItem>
              <MenuItem name="5as" style="display:flex;align-items: center;">
                <Icon style="font-size:22px;" type="ios-contact" />
                <a href="#/login" style="color:#515a6e;">普通登陆</a>
              </MenuItem>
            </template>
          </div>
        </Menu>
      </Col>
    </Row>
  </div>
</template>

<script>
import axios from "axios";
import {Row,Col,Menu,MenuItem,Icon,Submenu} from 'view-design'
export default {
  components:{Row,Col,Menu,MenuItem,Icon,Submenu},
  data() {
    return {
      user: {},
      types: []
    };
  },
  created() {
    this.getUser();
    this.getTypes();
  },
  methods: {
    getUser() {
      axios("/api/getCurrentUser").then(res => {
        // this.user
        this.user = res.data;
        console.log(this.user);
      });
    },
    async getTypes() {
      const res = await axios.get("/api/types");
      this.types = res.data;
    },
    async logout() {
      await axios("/api/logout");
      location.reload();
    }
  }
};
</script>

<style>
.ivu-menu-item {
  fill: #515a6e;
}
.ivu-menu-item-active,
.ivu-menu-item:hover {
  fill: #2d8cf0;
}
</style>