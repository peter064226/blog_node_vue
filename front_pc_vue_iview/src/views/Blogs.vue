<template>
  <Row type="flex" justify="center">
    <Col span="13" style="margin-right:20px;margin-top:-10px">
      <!-- <Content :style="{padding: '24px', minHeight: '280px', background: '#fff'}">
            <Breadcrumb :style="{margin: '24px 0'}">
              <BreadcrumbItem>主页</BreadcrumbItem>
              <BreadcrumbItem>Components</BreadcrumbItem>
              <BreadcrumbItem>Layout</BreadcrumbItem>
            </Breadcrumb>
              Content
      </Content>-->
      <Blogs :blogs="blogs" />
    </Col>
    <Col span="5" style="margin-top:10px;">
      <Card>
        <div style="display:flex;align-items: center;flex-direction: column;">
          <!-- <Avatar icon="ios-person" size="120" /> -->
          <svg
            t="1583415569667"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="8854"
            width="60"
            height="60"
          >
            <path
              d="M123.648 178.346667C361.642667-98.602667 802.986667-43.946667 967.936 279.68h-396.501333c-71.424 0-117.546667-1.621333-167.509334 24.661333-58.709333 30.933333-102.997333 88.234667-118.485333 155.52L123.648 178.389333z"
              fill="#EA4335"
              p-id="8855"
            />
            <path
              d="M341.674667 512c0 93.866667 76.330667 170.24 170.154666 170.24 93.866667 0 170.154667-76.373333 170.154667-170.24s-76.330667-170.24-170.154667-170.24c-93.866667 0-170.154667 76.373333-170.154666 170.24z"
              fill="#4285F4"
              p-id="8856"
            />
            <path
              d="M577.877333 734.848c-95.530667 28.373333-207.274667-3.114667-268.501333-108.8-46.762667-80.64-170.24-295.765333-226.346667-393.557333-196.565333 301.226667-27.136 711.808 329.685334 781.866666l165.12-279.509333z"
              fill="#34A853"
              p-id="8857"
            />
            <path
              d="M669.866667 341.76a233.130667 233.130667 0 0 1 43.008 286.634667c-40.576 69.973333-170.154667 288.682667-232.96 394.581333 367.658667 22.656 635.733333-337.664 514.645333-681.258667H669.866667z"
              fill="#FBBC05"
              p-id="8858"
            />
          </svg>

          <div style="margin-top:10px;">WEB全栈工程师</div>
          <div style="margin-top:0px;font-size:10px;color:gray;">专注于web和移动前后端开发</div>
          <div style="margin-top:10px;">
            <a href="https://github.com/william807803" target="_blank" style="margin-right:3px;">
              <svg
                t="1583325784621"
                class="icon"
                viewBox="0 0 1049 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="4925"
                width="20"
                height="20"
              >
                <path
                  d="M524.979332 0C234.676191 0 0 234.676191 0 524.979332c0 232.068678 150.366597 428.501342 358.967656 498.035028 26.075132 5.215026 35.636014-11.299224 35.636014-25.205961 0-12.168395-0.869171-53.888607-0.869171-97.347161-146.020741 31.290159-176.441729-62.580318-176.441729-62.580318-23.467619-60.841976-58.234462-76.487055-58.234463-76.487055-47.804409-32.15933 3.476684-32.15933 3.476685-32.15933 53.019436 3.476684 80.83291 53.888607 80.83291 53.888607 46.935238 79.963739 122.553122 57.365291 152.97411 43.458554 4.345855-33.897672 18.252593-57.365291 33.028501-70.402857-116.468925-12.168395-239.022047-57.365291-239.022047-259.012982 0-57.365291 20.860106-104.300529 53.888607-140.805715-5.215026-13.037566-23.467619-66.926173 5.215027-139.067372 0 0 44.327725-13.906737 144.282399 53.888607 41.720212-11.299224 86.917108-17.383422 131.244833-17.383422s89.524621 6.084198 131.244833 17.383422C756.178839 203.386032 800.506564 217.29277 800.506564 217.29277c28.682646 72.1412 10.430053 126.029806 5.215026 139.067372 33.897672 36.505185 53.888607 83.440424 53.888607 140.805715 0 201.64769-122.553122 245.975415-239.891218 259.012982 19.121764 16.514251 35.636014 47.804409 35.636015 97.347161 0 70.402857-0.869171 126.898978-0.869172 144.282399 0 13.906737 9.560882 30.420988 35.636015 25.205961 208.601059-69.533686 358.967656-265.96635 358.967655-498.035028C1049.958663 234.676191 814.413301 0 524.979332 0z"
                  fill="#1296db"
                  p-id="4926"
                />
                <path
                  d="M199.040177 753.571326c-0.869171 2.607513-5.215026 3.476684-8.691711 1.738342s-6.084198-5.215026-4.345855-7.82254c0.869171-2.607513 5.215026-3.476684 8.691711-1.738342s5.215026 5.215026 4.345855 7.82254z m-6.953369-4.345856M219.900283 777.038945c-2.607513 2.607513-7.82254 0.869171-10.430053-2.607514-3.476684-3.476684-4.345855-8.691711-1.738342-11.299224 2.607513-2.607513 6.953369-0.869171 10.430053 2.607514 3.476684 4.345855 4.345855 9.560882 1.738342 11.299224z m-5.215026-5.215027M240.760389 807.459932c-3.476684 2.607513-8.691711 0-11.299224-4.345855-3.476684-4.345855-3.476684-10.430053 0-12.168395 3.476684-2.607513 8.691711 0 11.299224 4.345855 3.476684 4.345855 3.476684 9.560882 0 12.168395z m0 0M269.443034 837.011749c-2.607513 3.476684-8.691711 2.607513-13.906737-1.738342-4.345855-4.345855-6.084198-10.430053-2.607513-13.037566 2.607513-3.476684 8.691711-2.607513 13.906737 1.738342 4.345855 3.476684 5.215026 9.560882 2.607513 13.037566z m0 0M308.555733 853.526c-0.869171 4.345855-6.953369 6.084198-13.037566 4.345855-6.084198-1.738342-9.560882-6.953369-8.691711-10.430053 0.869171-4.345855 6.953369-6.084198 13.037566-4.345855 6.084198 1.738342 9.560882 6.084198 8.691711 10.430053z m0 0M351.145116 857.002684c0 4.345855-5.215026 7.82254-11.299224 7.82254-6.084198 0-11.299224-3.476684-11.299224-7.82254s5.215026-7.82254 11.299224-7.82254c6.084198 0 11.299224 3.476684 11.299224 7.82254z m0 0M391.126986 850.049315c0.869171 4.345855-3.476684 8.691711-9.560882 9.560882-6.084198 0.869171-11.299224-1.738342-12.168395-6.084197-0.869171-4.345855 3.476684-8.691711 9.560881-9.560882 6.084198-0.869171 11.299224 1.738342 12.168396 6.084197z m0 0"
                  fill="#1296db"
                  p-id="4927"
                />
              </svg>
            </a>
            <a href style="margin-right:3px;">
              <svg
                t="1583326068309"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="6626"
                width="20"
                height="20"
              >
                <path
                  d="M511.500488 512.499512m-511.500488 0a511.500488 511.500488 0 1 0 1023.000976 0 511.500488 511.500488 0 1 0-1023.000976 0Z"
                  fill="#1BC1FA"
                  p-id="6627"
                />
                <path
                  d="M784.234146 572.440976c8.178014 0 16.273108 0.253752 24.282287 0.728288-16.961436-38.434466-42.247742-69.886751-58.977405-90.331785 2.822244-8.482716 11.30496-56.536788-25.443153-90.453666v-2.827239c0-132.850263-96.103149-231.785647-214.822213-231.785647-118.717065 0-214.82521 96.107145-214.825209 231.785647v2.827239c-33.915879 33.915879-25.437159 81.969951-19.782681 90.453666-25.444152 28.265397-73.49223 87.62343-76.320469 155.461182 0 16.961436 2.827239 45.226833 11.305959 56.531794 11.305959 14.133198 39.570357-2.827239 62.186272-48.054073 5.650482 19.788675 19.78368 53.709549 50.876316 93.281905-50.876316 11.302962-65.009514 62.186271-48.049077 90.450669 11.305959 19.788675 39.570357 33.920874 87.624429 33.920874 78.496343 0 115.815899-19.378076 134.378771-35.711126C492.644901 814.680414 490.520976 800.136617 490.520976 785.233171c0-117.522232 131.500581-212.792195 293.71317-212.792195z"
                  fill="#FFFFFF"
                  p-id="6628"
                />
                <path
                  d="M514.925143 819.204995c5.654478 0 11.309955 2.82624 14.132199 5.649483 16.960437 16.960437 53.709549 39.575352 138.50674 39.575352 48.054072 0 76.320468-16.960437 87.625428-33.920874 16.960437-28.264398 2.827239-79.147707-48.054072-90.450669 31.092636-39.572355 45.225834-73.493229 50.881311-93.281905 19.787676 45.226833 50.881311 62.18727 62.186271 48.054073 2.827239-11.30496 5.650482-39.570357 5.650482-56.531794-1.93511-23.223321-8.508691-45.121936-17.337069-65.128398-8.009179-0.475536-16.104273-0.729288-24.282287-0.729287-162.212589 0-293.713171 95.269963-293.71317 212.792195 0 14.903446 2.123926 29.447243 6.147996 43.485533a88.18688 88.18688 0 0 0 4.122973-3.864226c2.827239-2.823243 8.481717-5.649483 14.133198-5.649483z"
                  fill="#FFFFFF"
                  opacity=".4"
                  p-id="6629"
                />
              </svg>
            </a>
            <a href>
              <svg
                t="1583326453870"
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="19155"
                width="20"
                height="20"
              >
                <path
                  d="M512 0Q294 5 149.5 149.5T0 512q5 218 149.5 362.5T512 1024q218-5 362.5-149.5T1024 512q-5-218-149.5-362.5T512 0z m-74 523q0 1-1 2l-12 38-3 50 8 42-12 1h-22q-10 0-21-2l-12-2-46-9-7 4-4-2-80 41 32-80-46-40-32-43-21-58-3-50 9-47 28-57 30-35 28-23 35-20 43-17 23-6 23-4q17-1 34-1h2q17 0 34 1l13 2 26 6 30 9 29 13 31 19 41 36 10 11 19 30 22 57-14-1h-23q-10 1-19 2l-20 4-20 6-28 11-28 17-35 30-18 22-19 38-4 5z m434 72v11l-3 19-26 59-31 39-29 26 20 68-69-41-6 2-45 10-16 1h-20q-9 0-19-1l-11-2-16-3-22-7-30-13-28-17-31-28-20-26-24-59-4-55 4-22 25-59 30-37 42-31 37-16 29-8 20-4q14-1 29-1h1q14 0 27 1l11 2 16 3 21 7 30 13 29 18 32 29 20 26q1 0 1 1l25 61 4 34h-3z m-287-83q-10 0-17.5 7.5T560 537q0 10 7.5 17.5T585 562q15 0 23.5-7.5T617 537q0-10-8.5-17.5T585 512z m140 0q-10 0-17.5 7.5T700 537q0 10 7.5 17.5T725 562q15 0 23.5-7.5T757 537q0-10-8.5-17.5T725 512zM324 327q-15 0-26 8.5t-11 23q0 14.5 11 23t26 8.5q15 0 23.5-8.5t8.5-23q0-14.5-8.5-23T324 327z m179 0q-15 0-26.5 8.5t-11.5 23q0 14.5 11.5 23t26 8.5q14.5 0 23-8.5t8.5-23q0-14.5-8.5-23T503 327z"
                  fill="#1296db"
                  p-id="19156"
                />
              </svg>
            </a>
          </div>
        </div>
      </Card>
      <Affix :offset-top="10">
        <Card style="margin-top:10px;">
          <div slot="title" style="font-size:13px;color:gray;">最近更新</div>
          <div style="font-size:13px;" v-for="(ele,idx) in blogs" :key="ele.id">
            <router-link style="color: gray;" :to="`/blog/${ele.id}`">{{idx+1}}、{{ele.title}}</router-link>
          </div>
        </Card>
      </Affix>
    </Col>
  </Row>
</template>

<script>
// @ is an alias to /src
import Blogs from "@/components/Blogs.vue";
import axios from "axios";
import {Row,Col,Affix,Card} from 'view-design'
export default {
  name: "blogsPage",
  components: {
    Blogs,Row,Col,Affix,Card
  },
  data() {
    return {
      blogs: []
    };
  },
  created() {
    // this.getArticles();
  },
  beforeRouteEnter(to, from, next) {
    let typeId = to.params.typeId;
    axios(`/api/blogs` + (typeId ? `?typeId=${typeId}` : ``)).then(res => {
      next(vm => {
        vm.blogs = res.data;
      });
    });
  },
  beforeRouteUpdate(to, from, next) {
    let typeId = to.params.typeId;
    console.log("typeId:" + typeId);
    axios(`/api/blogs` + (typeId ? `?typeId=${typeId}` : ``)).then(res => {
      this.blogs = res.data;
    });
    next();
  },
  methods: {
    async getBlogs(to, from, next) {
      let typeId = to.params.typeId;
      axios(`/api/blogs` + (typeId ? `?typeId=${typeId}` : ``)).then(res => {
        next(vm => {
          vm.blogs = res.data;
        });
      });
    }
  }
};
</script>
